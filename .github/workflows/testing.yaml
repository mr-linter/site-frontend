name: Check

on:
  push:
    branches: [ check-if ]

jobs:
  testing:
    runs-on: ubuntu-latest

    steps:
    - name: Dump GitHub context
      id: github_context_step
      run: echo '${{ toJSON(github) }}'
    - name: Dump job context
      run: echo '${{ toJSON(job) }}'

    - name: Failing step
      run: exit 1

    - if: ${{ failure() }}
      name: Send notification about failure build
      uses: appleboy/telegram-action@master
      with:
        to: ${{ secrets.TELEGRAM_CHAT }}
        token: ${{ secrets.TELEGRAM_TOKEN }}
        message: |
          Build failed on commit "${{ github.event.commits[0].message }}"
