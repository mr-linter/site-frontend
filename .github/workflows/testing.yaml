name: Check

on:
  push:
    branches: [ check-if ]

jobs:
  testing:
    runs-on: ubuntu-latest

    steps:
    - name: Failing step
      run: exit 1

    - if: ${{ failure() }}
      name: Send notification about failure build
      uses: appleboy/telegram-action@master
      with:
        to: ${{ secrets.TELEGRAM_CHAT }}
        token: ${{ secrets.TELEGRAM_TOKEN }}
        message: |
          🔻 Build failed on commit "${{ github.head_commit.message }}" by ${{ github.author.username }}
          
          🔗 Commit url: ${{ github.head_commit.url }}
          
          🌐 Url to failed job: ${{ github.server_url }}/${{ github.repository }}/actions/runs/${{ github.run_id }}
